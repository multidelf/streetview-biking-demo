
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ä¸€é¨å‡ºç™¼å§ï½œè¡—æ™¯é¨ä¹˜æ¨¡æ“¬å™¨</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; font-family: sans-serif; }
    #logoHeader {
      position: absolute; top: 10px; left: 10px; z-index: 999;
      background: rgba(255, 255, 255, 0.85); border-radius: 8px;
      padding: 5px 10px; display: flex; align-items: center;
      font-weight: bold;
    }
    #logoHeader img { height: 32px; margin-right: 8px; }
    #inputGuide {
      position: absolute; top: 60px; left: 10px; z-index: 998;
      background: rgba(255,255,255,0.95); padding: 12px; max-width: 360px;
      border-left: 5px solid #4CAF50; border-radius: 5px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2); font-size: 14px;
    }
    #app {
      width: 100%;
      height: 100%;
      background-color: #eee;
    }
    select, button {
      font-size: 14px; margin-top: 8px; padding: 6px;
      border-radius: 4px; border: 1px solid #ccc; width: 100%;
    }
    #playOptions {
      margin-top: 12px;
    }
  </style>
</head>
<body>
  <div id="logoHeader">
    <img src="assets/img/logo.jpg" alt="Logo">
    ä¸€é¨å‡ºç™¼å§ï½œè¡—æ™¯é¨ä¹˜æ¨¡æ“¬å™¨
  </div>

  <div id="inputGuide">
    <h3>ğŸ“Œ è«‹é¸æ“‡è·¯ç·šä¾†æºæ–¹å¼</h3>
    <ol>
      <li><b>ä¸‹æ‹‰é¸å–®</b>ï¼šé¸æ“‡é è¨­è·¯ç·šï¼ˆç”± Google Sheet æä¾›ï¼‰</li>
      <li><b>è²¼ä¸Šç¶“ç·¯åº¦</b>ï¼šè‡ªè¡Œè¼¸å…¥ GPS é»ä½</li>
      <li><b>A â†’ B æœå°‹</b>ï¼šèµ·çµ‚é»æŸ¥è©¢å°èˆªè·¯ç·š</li>
    </ol>
    <div>
      <label for="routeSelect">ğŸ”½ é¸æ“‡è·¯ç·šï¼š</label>
      <select id="routeSelect"><option>è¼‰å…¥ä¸­...</option></select>
      <div id="playOptions">
        <label><input type="checkbox" id="autoPlayToggle" checked> é¸æ“‡å¾Œè‡ªå‹•æ’­æ”¾</label><br>
        <button id="manualPlayBtn">â–¶ï¸ æ‰‹å‹•é–‹å§‹å°èˆª</button>
      </div>
    </div>
  </div>

  <div id="app">
    <!-- æ¨¡æ“¬å™¨ä¸»ç•«é¢å°‡é¡¯ç¤ºæ–¼æ­¤ -->
  </div>

  <script>
    const apiBase = "https://script.google.com/macros/s/AKfycbzctNoMZS3m3FX3q1s3Ka4ZgK-bVsMKkOh0rL9IQaS1wO1dprzkUcCpZqE4YpQW7vtA/exec";

    const routeSelect = document.getElementById("routeSelect");
    const autoPlayToggle = document.getElementById("autoPlayToggle");
    const manualPlayBtn = document.getElementById("manualPlayBtn");

    async function fetchRouteNames() {
      const res = await fetch(apiBase);
      const data = await res.json();
      routeSelect.innerHTML = data.routes.map(name => `<option value="${name}">${name}</option>`).join("");
    }

    async function fetchRoutePoints(routeName) {
      const res = await fetch(`${apiBase}?routeName=${encodeURIComponent(routeName)}`);
      const data = await res.json();
      console.log("ğŸ“ è¼‰å…¥è·¯ç·šï¼š", data.routeName);
      console.log("âœ… é»åˆ—è³‡æ–™ï¼š", data.points);

      if (autoPlayToggle.checked) {
        // ğŸ” è‡ªå‹•æ’­æ”¾ï¼ˆé€™è£¡é ç•™è§¸ç™¼æ¨¡æ“¬å™¨çš„ç¨‹å¼ï¼‰
        console.log("ğŸ¬ è‡ªå‹•é–‹å§‹æ¨¡æ“¬å™¨å°èˆª");
      }
    }

    routeSelect.addEventListener("change", () => {
      const name = routeSelect.value;
      if (name) fetchRoutePoints(name);
    });

    manualPlayBtn.addEventListener("click", () => {
      const name = routeSelect.value;
      if (name) fetchRoutePoints(name);
    });

    fetchRouteNames();
  </script>
</body>
</html>
